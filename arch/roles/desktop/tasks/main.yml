---
- name: Install audio packages
  become: true
  community.general.pacman:
    name:
      - alsa-utils
      - alsa-plugins
      - pipewire
      - pipewire-docs
      - pipewire-alsa
      - pipewire-pulse
      - wireplumber
      - pavucontrol
      - easyeffects

- name: Enable network manager
  become: true
  ansible.builtin.systemd:
    name: NetworkManager.service
    enabled: true

- name: Install keymapper
  become: true
  community.general.pacman:
    name: keymapper

- name: Enable keymapperd
  become: true
  ansible.builtin.systemd:
    name: keymapperd.service
    enabled: true
    state: started

- name: Install bluetooth packages
  become: true
  community.general.pacman:
    name:
      - bluez
      - bluez-utils
      - blueman

- name: Enable bluetooth
  become: true
  ansible.builtin.systemd:
    name: bluetooth.service
    enabled: true

- name: Install base packages
  become: true
  community.general.pacman:
    name:
      - firefox
      - firefox-i18n-en-us
      - firefox-i18n-es-es
      - firefox-i18n-fr
      - firefox-i18n-it
      - openssh

- name: Install GNOME desktop environment
  ansible.builtin.include_tasks: gnome.yml
  when: mtype != 'media'

- name: Install XFCE desktop environment
  ansible.builtin.include_tasks: xfce.yml
  when: mtype == 'media'

- name: Install printing packages
  ansible.builtin.include_tasks: printing.yml
  when: mtype != 'media'

- name: Install fonts
  ansible.builtin.include_tasks: fonts.yml

# - name: install cursors
#   when: mtype != 'server'
#   kewlfft.aur.aur: name=xcursor-openzone
