---
- name: Installing GNOME
  become: true
  community.general.pacman:
    name:
      - gnome
      - gnome-extra
    state: present

- name: Installing GNOME extras
  become: true
  community.general.pacman:
    name:
      - gnome-shell-extension-appindicator
      - hddtemp # for freon extension
      - network-manager-applet
      - power-profiles-daemon
      - seahorse
      - system-config-printer
      - wl-clipboard
      - xdg-desktop-portal
      - xdg-desktop-portal-gnome
    state: present

- name: Installing GNOME extras from the AUR
  kewlfft.aur.aur:
    name:
      - gnome-shell-extension-arc-menu
      - gnome-shell-extension-arch-update
      - gnome-shell-extension-bluetooth-quick-connect
      - gnome-shell-extension-dash-to-dock
      - gnome-shell-extension-emoji-selector-git
      - gnome-shell-extension-espresso-git
      - gnome-shell-extension-freon
      - gnome-shell-extension-no-overview
      - gnome-shell-extension-systemd-manager
      - gnome-shell-extension-weather-in-the-clock-git
    state: present

- name: Copying systemd policy for the systemd GNOME extension
  become: true
  ansible.builtin.copy:
    dest: /etc/polkit-1/rules.d/10-service_status.rules
    group: root
    mode: "0644"
    owner: root
    src: service.rules

- name: Installing firmware updater
  become: true
  community.general.pacman:
    name:
      - dmidecode
      - fwupd
      - gnome-firmware
    state: present

- name: Enabling GDM
  become: true
  ansible.builtin.systemd:
    enabled: true
    name: gdm.service
