---
- name: Install kubectl bash completion
  when: kubectl_installed.changed
  ansible.builtin.shell: /usr/local/bin/kubectl completion bash > /etc/bash_completion.d/kubectl

- name: Install kubectl zsh completion
  when: kubectl_installed.changed
  ansible.builtin.shell: /usr/local/bin/kubectl completion zsh > /usr/share/zsh/vendor-completions/_kubectl

- name: Install helm bash completion
  when: helm_installed.changed
  ansible.builtin.shell: /usr/local/bin/helm completion bash > /etc/bash_completion.d/helm

- name: Install helm zsh completion
  when: helm_installed.changed
  ansible.builtin.shell: /usr/local/bin/helm completion zsh > /usr/share/zsh/vendor-completions/_helm
